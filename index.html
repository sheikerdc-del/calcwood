<!-- index.html -->
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>CalcWood — онлайн‑калькуляторы</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0b0f14">
  <meta name="description" content="Калькуляторы для клея, ФЦС, веса древесины, фасонных элементов из металла, пиломатериалов и крепежа.">
  <link rel="manifest" href="./manifest.webmanifest" type="application/manifest+json">
  <link rel="icon" href="./icons/favicon.ico" sizes="any">
  <link rel="apple-touch-icon" href="./icons/apple-touch-icon.png">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-wrap">
      <a href="./" class="brand" aria-label="На главную CalcWood">
        <svg class="icon lg" aria-hidden="true" focusable="false">
          <use href="./sprite.svg#logo-calcwood"></use>
        </svg>
        <strong>CalcWood</strong>
      </a>
      <nav class="nav">
        <a href="#benefits">Преимущества</a>
        <a href="#calculators">Калькуляторы</a>
        <a href="#faq">FAQ</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="container hero-wrap">
      <div class="hero-text">
        <h1>Онлайн‑калькуляторы для стройки и материалов</h1>
        <p>Открывайте калькуляторы прямо на странице, проверяйте их доступность в реальном времени и делитесь прямыми ссылками.</p>
        <div class="cta">
          <a class="btn primary" href="#calculators">Смотреть калькуляторы</a>
          <a class="btn" href="https://github.com/yourname/calcwood" target="_blank" rel="noopener">GitHub</a>
        </div>
      </div>
      <div class="hero-art">
        <img src="./hero.webp" width="1200" height="600" alt="Иллюстрация калькуляторов">
      </div>
    </div>
  </section>

  <section id="benefits" class="benefits">
    <div class="container">
      <h2>Почему CalcWood</h2>
      <ul class="benefit-list">
        <li><strong>Быстро</strong><br>Модалка без перехода на другую страницу.</li>
        <li><strong>Удобно</strong><br>Прямые ссылки вида #calc/&lt;id&gt;.</li>
        <li><strong>Надёжно</strong><br>PWA‑офлайн для лендинга и кэширование статики.</li>
        <li><strong>Актуально</strong><br>Индикация «Онлайн/Оффлайн» для калькуляторов.</li>
      </ul>
    </div>
  </section>

  <section id="calculators" class="calculators">
    <div class="container">
      <h2>Калькуляторы</h2>

      <form id="filterForm" class="filter" role="search" aria-label="Фильтр калькуляторов">
        <input id="search" type="search" placeholder="Поиск по названию или описанию…" autocomplete="off" />
      </form>

      <div id="cards" class="grid" aria-busy="false"></div>

      <template id="cardTemplate">
        <article class="card" data-id="">
          <div class="card__media">
            <img data-cover src="" alt="">
          </div>
          <div class="card__body">
            <h3 data-title></h3>
            <p data-desc></p>
            <div class="card__bottom">
              <div class="card__actions">
                <button class="btn primary" data-open>Открыть</button>
                <a class="btn" data-ext target="_blank" rel="noopener">В новой вкладке</a>
              </div>
              <span class="status" data-status>Проверка...</span>
            </div>
          </div>
        </article>
      </template>
    </div>
  </section>

  <section id="faq" class="faq">
    <div class="container">
      <h2>FAQ</h2>
      <details>
        <summary>Почему некоторые калькуляторы не открываются в модалке?</summary>
        <div>Их сайты запрещают встраивание (CSP/X‑Frame‑Options). Используйте кнопку «В новой вкладке».</div>
      </details>
      <details>
        <summary>Работает ли всё офлайн?</summary>
        <div>Офлайн доступна только эта страница и её статика. Внешние калькуляторы офлайн не работают.</div>
      </details>
    </div>
  </section>

  <footer class="site-footer">
    <div class="container footer-wrap">
      <div>© CalcWood</div>
      <nav class="nav">
        <a href="./privacy.html">Политика</a>
        <a href="./terms.html">Условия</a>
      </nav>
    </div>
  </footer>

  <div id="modal" class="modal" hidden>
    <div class="modal__overlay" data-close aria-hidden="true"></div>
    <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header class="modal__header">
        <h3 id="modalTitle">Калькулятор</h3>
        <div class="nav">
          <a id="openExternal" class="btn" target="_blank" rel="noopener">В новой вкладке</a>
          <button class="icon-btn" type="button" data-close aria-label="Закрыть">×</button>
        </div>
      </header>
      <div class="modal__body">
        <div id="frameWrap" class="frame-wrap" aria-busy="false">
          <iframe id="calcFrame" title="Калькулятор" loading="eager" referrerpolicy="no-referrer"></iframe>
        </div>
        <div id="frameNotice" class="frame-notice" hidden>
          Сайт калькулятора не разрешает встраивание в iframe. Откройте его по кнопке «В новой вкладке».
        </div>
      </div>
      <footer class="modal__footer">
        <div class="nav">
          <a id="openExternalFooter" class="btn" target="_blank" rel="noopener">В новой вкладке</a>
          <button id="copyLink" class="btn" type="button">Скопировать ссылку</button>
        </div>
        <button class="icon-btn" type="button" data-close aria-label="Закрыть">Закрыть</button>
      </footer>
    </div>
  </div>

  <script src="./script.js" type="module"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js').catch(console.error));
    }
  </script>
</body>
</html>